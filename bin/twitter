#!/usr/bin/env node
// Regular js file for nodejs, all js syntax and APIs are available

// Remember: node uses 'require' and not 'import'
const yargs = require("yargs");
const program = require("../lib/index");

// Global variable process contain all info about the running process
// - argv: the list of arguments
// - env: environment variables
// - ...
// See: https://nodejs.org/api/process.html

const findUp = require("find-up");
const fs = require("fs");
const configPath = findUp.sync([".twitterrc", ".twitterc.json"]);
const config = configPath ? JSON.parse(fs.readFileSync(configPath)) : {};

const argv = yargs
  .scriptName("twitter")
  .config(config)
  .usage("$0 [command] [options] @twitterAccount")
  .option("key", {
    alias: "k",
    describe: "Twitter API key"
  })
  .option("secret", {
    alias: "s",
    describe: "Twitter API secret"
  })
  .demandOption(["key", "secret"], "Please provide both key and secret")
  .commandDir("../lib/commands")
  .recommendCommands()
  .help().argv;
